;Inicialização de dados:	
	LDA	ZERO
	STA	PASSOS
	STA	ESTADO
	LDA	DOIS
	STA	CONT
	LDA	LSB
	STA	LSB2
	STA	LSB3
	LDA	MSB
	STA	MSB2

;Início do programa:
	JZ	TESTA_ZERO
TESTA_PAR:
	;N != DE 1 E 0
	LDA 	MSB2
	STA	MSB3	
	LDA	PASSOS
	ADD 	UM
	STA	PASSOS
	;TESTA SE JÁ É UM
	LDA 	MSB2
	JNZ	TESTA_PAR_CONT
	LDA	LSB2
	SUB	UM
	JNZ	TESTA_PAR_CONT
	;É UM
	LDA	UM
	STA	ESTADO
	JMP 	FIM		

TESTA_PAR_CONT:
	LDA	LSB2
	SHR	
	JC	MULT_3
DIV_2:
	LDA	MSB2
	SHR	
	STA	MSB2
	LDA	LSB2
	ROR	
	STA	LSB2	
	STA	LSB3
	JMP	TESTA_PAR

MULT_3:
	LDA	MSB2
	ADD	MSB3
	STA	MSB2
	JC	ESTOURO
	LDA	LSB2
	ADD	LSB3
	STA	LSB2
	JC	SOMA_1	
MULT_3_CONT:
	LDA	CONT
	SUB 	UM
	STA	CONT
	JNZ	MULT_3
	LDA	DOIS
	STA	CONT
	LDA	LSB2
	ADD	UM
	STA	LSB2
	STA	LSB3	
	JNC	TESTA_PAR
	LDA	MSB2
	ADD	UM
	STA	MSB2
	JC	ESTOURO	
	JMP	TESTA_PAR
SOMA_1:
	LDA	MSB2
	ADD	UM
	STA	MSB2
	JMP	MULT_3_CONT

ORG 128
	MSB: 	DB    0  ;128
	LSB:	DB    0  ;129
	PASSOS: DB    0  ;130
	ESTADO: DB    0  ;131
	ZERO:   DB    0  ;132
	UM:     DB    1  ;133
	mUM:    DB    255 ;134
	MSB2:   DB    0  ;135 -> contém cópia de 128
	LSB2:   DB    0  ;136 -> contém cópia de 129
	CONT:	DB    2  ;137
	DOIS:   DB    2	 ;138 	
	MSB3:	DB    0  ;139
	LSB3:	DB    0  ;140	

TESTA_ZERO: 
	LDA 	LSB2
	JNZ	TESTA_UM	;SE Z = 0 PARA PARA D2		
				;Z = 1, OU SEJA, 135 E 136 = 0 -> PASSOS E ESTADO = 0
	JMP	FIM

TESTA_UM:
	SUB 	UM
	JNZ	TESTA_PAR
	LDA	UM
	STA	PASSOS
	STA 	ESTADO	
	JMP	FIM

ESTOURO:
	LDA 	ZERO
	STA	PASSOS
	LDA 	mUM
	STA	ESTADO	
FIM:
	HLT		

